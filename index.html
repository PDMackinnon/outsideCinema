<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Hello, World! - A-Frame</title>
    <meta name="description" content="Hello, World! - A-Frame" />
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-extras/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-rounded-box-component"></script>
  </head>
  <body>
    <script>
      AFRAME.registerComponent("modify-materials", {
        init: function () {
          // Wait for model to load.
          this.el.addEventListener("model-loaded", () => {
            // Grab the mesh / scene.
            const obj = this.el.getObject3D("mesh");
            // Go over the submeshes and modify materials we want.
            obj.traverse((node) => {
              if (node.material) {
                node.material.color.set("yellow");
              }
            });
          });
        },
      });
    </script>

    <a-scene
      inspector="url: https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js"
    >
      <a-assets>
        <img id="leather" src="./leather.jpg" />
        <img id="normalLeather" src="./leather/normals.jpg" />
        <img id="rougnessLeather" src="./leather/roughness.jpg" />
        <img id="displLeather" src="./leather/displacement.jpg" />

        <video id="arrows" autoplay loop="true" src="./arrows02.mp4"></video>

        <a-asset-item
          id="manChar"
          src="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/models/male/model.gltf"
        ></a-asset-item>

        <a-asset-item
          id="walkingChar"
          src="https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/korrigan-hat/model.gltf"
        ></a-asset-item>
      </a-assets>

      <a-entity
        gltf-model="#walkingChar"
        scale="1.5 1.5 1.5"
        position="0 0 -2"
        animation-mixer="clip: pose_chapeau"
      ></a-entity>

      <!-- <a-entity rotation="0 180 0"> -->
      <a-plane
        position="0 8 -3"
        rotation="0 0 0"
        width="3"
        height="1.5"
        color="#7BC8A4"
        animation="property: position; to: 0 2 -3; dur: 1000; easing: easeOutCubic; loop: false; delay: 800"
      >
      </a-plane>

      <a-video src="#arrows" width="2" height="1" position="0 2 -2.8"></a-video>

      <a-plane
        position="-5 2 -3"
        rotation="0 0 0"
        width="1.5"
        height="3"
        color="#cc22aa"
        animation="property: position; to: -2.5 2 -3; dur: 800; easing: easeOutCubic; loop: false; delay: 500"
        animation__2="property: rotation; to: 0 30 0; dur: 800; easing: easeOutCubic; loop: false; delay: 1500"
      ></a-plane>

      <a-plane
        position="5 2 -3"
        rotation="0 0 0"
        width="1.5"
        height="3"
        color="#cc22aa"
        animation="property: position; to: 2.5 2 -3; dur: 800; easing: easeOutCubic; loop: false; delay: 500"
        animation__2="property: rotation; to: 0 -30 0; dur: 800; easing: easeOutCubic; loop: false; delay: 1500"
      ></a-plane>

      <a-box
        position="0 0 -3"
        depth="0.5"
        width="3"
        height="1"
        material="src: #leather; repeat: 0.4 0.4; normalMap: #normalLeather"
      ></a-box>
      <a-rounded-box
        position="0 -3 -3"
        depth="1.5"
        width="5"
        height="1.5"
        radius="0.3"
        material="src: #leather; repeat: 0.4 0.4; normalMap: #normalLeather"
      ></a-rounded-box>
      <!-- </a-entity> -->

      <a-sky src="./skybox.jpg"></a-sky>
      <!-- <a-sky color="#ECECEC"></a-sky> -->
    </a-scene>
  </body>
</html>
